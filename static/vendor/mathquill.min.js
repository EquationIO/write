!function(){function t(){}function e(t){var e=t.length-1;return function(){var n=ge.call(arguments,0,e),i=ge.call(arguments,e);return t.apply(this,n.concat([i]))}}function n(t){return e(function(e,n){"function"!=typeof e&&(e=be(e));var i=function(t){return e.apply(t,[t].concat(n))};return t.call(this,i)})}function i(t){var e=ge.call(arguments,1);return function(){return t.apply(this,e)}}function r(t,e){if(!e)throw new Error("prayer failed: "+t)}function s(t){r("a direction was passed",t===xe||t===we)}function a(t,e,n){r("a parent is always present",t),r("leftward is properly set up",function(){return e?e[we]===n&&e.parent===t:t.ends[xe]===n}()),r("rightward is properly set up",function(){return n?n[xe]===e&&n.parent===t:t.ends[we]===e}())}function o(t){if(!t.nodeType)return null;var e=ye(t).children(".mathquill-root-block").attr(de);return e?je.byId[e].controller.API:null}function c(t,e){o[t]=function(t,n){var i=o(t);return i instanceof e||!t.nodeType?i:e(ye(t),n)},o[t].prototype=e.prototype}function l(t){var e,n;for(t.handlers={},t.setHandlers=function(t,e){t&&(this.handlers=t,this.extraArg=e)},e="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf edited".split(" "),n=0;n<e.length;n+=1)(function(e){t[e]=3>n?function(t){this.handlers[e]&&this.handlers[e](t,this.extraArg)}:function(){this.handlers[e]&&this.handlers[e](this.extraArg)}})(e[n])}function u(t,e,n){return ve(O,{ctrlSeq:t,htmlTemplate:"<"+e+" "+n+">&0</"+e+">"})}function h(t){var e=this.parent,n=t;do{if(n[we])return t.insLeftOf(e);n=n.parent.parent}while(n!==e);t.insRightOf(e)}var f,p,d,m,g,b,v,x,w,y,k,j,O,Q,C,T,q,L,E,S,D,A,R,I,z,B,M,F,$,P,_,U,N,W,H,G,K,X,Z,Y,J,V,te,ee,ne,ie,re,se,ae,oe,ce,le,ue,he,fe=window.jQuery,pe="mathquill-command-id",de="mathquill-block-id",me=Math.min,ge=(Math.max,[].slice),be=e(function(t,n){return e(function(e,i){return t in e?e[t].apply(e,n.concat(i)):void 0})}),ve=function(t,e,n){function i(t){return"object"==typeof t}function r(t){return"function"==typeof t}function s(){}return function a(o,c){function l(){var t=new u;return r(t.init)&&t.init.apply(t,arguments),t}function u(){}var h,f,p;return c===n&&(c=o,o=Object),l.Bare=u,h=s[t]=o[t],f=u[t]=l[t]=l.p=new s,f.constructor=l,l.mixin=function(e){return u[t]=l[t]=a(l,e)[t],l},(l.open=function(t){if(p={},r(t)?p=t.call(l,f,h,l,o):i(t)&&(p=t),i(p))for(var n in p)e.call(p,n)&&(f[n]=p[n]);return r(f.init)||(f.init=o),l})(c)}}("prototype",{}.hasOwnProperty),xe=o.L=-1,we=o.R=1,ye=ve(fe,function(t){t.insDirOf=function(t,e){return t===xe?this.insertBefore(e.first()):this.insertAfter(e.last())},t.insAtDirEnd=function(t,e){return t===xe?this.prependTo(e):this.appendTo(e)}}),ke=ve(function(t){t.parent=0,t[xe]=0,t[we]=0,t.init=function(t,e,n){this.parent=t,this[xe]=e,this[we]=n},this.copy=function(t){return ke(t.parent,t[xe],t[we])}}),je=ve(function(t){function e(){return i+=1}t[xe]=0,t[we]=0,t.parent=0;var i=0;this.byId={},t.init=function(){this.id=e(),je.byId[this.id]=this,this.ends={},this.ends[xe]=0,this.ends[we]=0},t.dispose=function(){delete je.byId[this.id]},t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.jQ=ye(),t.jQadd=function(t){return this.jQ=this.jQ.add(t)},t.jQize=function(t){function e(t){var n,i;for(t.getAttribute&&(n=t.getAttribute("mathquill-command-id"),i=t.getAttribute("mathquill-block-id"),n&&je.byId[n].jQadd(t),i&&je.byId[i].jQadd(t)),t=t.firstChild;t;t=t.nextSibling)e(t)}var n;for(t=ye(t||this.html()),n=0;n<t.length;n+=1)e(t[n]);return t},t.createDir=function(t,e){s(t);var n=this;return n.jQize(),n.jQ.insDirOf(t,e.jQ),e[t]=n.adopt(e.parent,e[xe],e[we]),n},t.createLeftOf=function(t){return this.createDir(xe,t)},t.bubble=n(function(t){var e,n;for(e=this;e&&(n=t(e),n!==!1);e=e.parent);return this}),t.postOrder=n(function(t){return function e(n){n.eachChild(e),t(n)}(this),this}),t.isEmpty=function(){return 0===this.ends[xe]&&0===this.ends[we]},t.children=function(){return Oe(this.ends[xe],this.ends[we])},t.eachChild=function(){var t=this.children();return t.each.apply(t,arguments),this},t.foldChildren=function(t,e){return this.children().fold(t,e)},t.adopt=function(t,e,n){return Oe(this,this).adopt(t,e,n),this},t.disown=function(){return Oe(this,this).disown(),this},t.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}),Oe=ve(function(t){t.init=function(t,e){r("no half-empty fragments",!t==!e),this.ends={},t&&(r("left end node is passed to Fragment",t instanceof je),r("right end node is passed to Fragment",e instanceof je),r("leftEnd and rightEnd have the same parent",t.parent===e.parent),this.ends[xe]=t,this.ends[we]=e,this.jQ=this.fold(this.jQ,function(t,e){return t.add(e.jQ)}))},t.jQ=ye(),t.adopt=function(t,e,n){var i,r,s;return a(t,e,n),i=this,i.disowned=!1,(r=i.ends[xe])?(s=i.ends[we],e||(t.ends[xe]=r),n?n[xe]=s:t.ends[we]=s,i.ends[we][we]=n,i.each(function(n){n[xe]=e,n.parent=t,e&&(e[we]=n),e=n}),i):this},t.disown=function(){var t,e,n=this,i=n.ends[xe];return!i||n.disowned?n:(n.disowned=!0,t=n.ends[we],e=i.parent,a(e,i[xe],i),a(e,t,t[we]),i[xe]?i[xe][we]=t[we]:e.ends[xe]=t[we],t[we]?t[we][xe]=i[xe]:e.ends[we]=i[xe],n)},t.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},t.each=n(function(t){var e,n=this,i=n.ends[xe];if(!i)return n;for(;i!==n.ends[we][we]&&(e=t(i),e!==!1);i=i[we]);return n}),t.fold=function(t,e){return this.each(function(n){t=e.call(this,t,n)}),t},this.between=function(t,e){var n,i,s,a,o,c,l;r("A and B are not the same Point",t.parent!==e.parent||t[xe]!==e[xe]||t[we]!==e[we]),n=t,i=e,s={},a={};do{if(s[n.parent.id]=n,a[i.parent.id]=i,i.parent.id in s){n=s[i.parent.id];break}if(n.parent.id in a){i=a[n.parent.id];break}n.parent&&(n=n.parent),i.parent&&(i=i.parent)}while(n.parent||i.parent);if(r("A and B are in the same tree",n.parent||i.parent),n[xe]!==i)for(l=n;l;l=l[we])if(l[we]===i[we]){o=n,c=i;break}return o||(o=i,c=n),o instanceof ke&&(o=o[we]),c instanceof ke&&(c=c[xe]),Oe(o,c)}}),Qe={},Ce={},Te=ve(ke,function(t){t.init=function(t){this.parent=t;var e=this.jQ=this._jQ=ye('<span class="cursor">&zwj;</span>');this.blink=function(){e.toggleClass("blink")},this.upDownCache={}},t.show=function(){return this.jQ=this._jQ.removeClass("blink"),"intervalId"in this?clearInterval(this.intervalId):(this[we]?this.jQ.insertBefore(this.selection&&this.selection.ends[xe][xe]===this[xe]?this.selection.jQ:this[we].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=ye(),this},t.withDirInsertAt=function(t,e,n,i){e!==this.parent&&this.parent.blur(),this.parent=e,this[t]=n,this[-t]=i},t.insDirOf=function(t,e){return s(t),this.withDirInsertAt(t,e.parent,e[t],e),this.parent.jQ.addClass("hasCursor"),this.jQ.insDirOf(t,e.jQ),this},t.insLeftOf=function(t){return this.insDirOf(xe,t)},t.insRightOf=function(t){return this.insDirOf(we,t)},t.insAtDirEnd=function(t,e){return s(t),this.withDirInsertAt(t,e,0,e.ends[t]),this.jQ.insAtDirEnd(t,e.jQ),e.focus(),this},t.insAtLeftEnd=function(t){return this.insAtDirEnd(xe,t)},t.insAtRightEnd=function(t){return this.insAtDirEnd(we,t)},t.jumpUpDown=function(t,e){var n,i,r=this;r.upDownCache[t.id]=ke.copy(r),n=r.upDownCache[e.id],n?n[we]?r.insLeftOf(n[we]):r.insAtRightEnd(n.parent):(i=r.offset().left,e.seek(i,r))},t.offset=function(){var t=this,e=t.jQ.removeClass("cursor").offset();return t.jQ.addClass("cursor"),e},t.insertCmd=function(t,e){var n=Qe[t];return n?(n=n(t),e&&n.replaces(e),n.createLeftOf(this)):(n=O(),n.replaces(t),n.createLeftOf(this),this.insRightOf(n),e&&e.remove()),this},t.unwrapGramp=function(){var t=this.parent.parent,e=t.parent,n=t[we],i=t[xe];if(t.disown().eachChild(function(r){r.isEmpty()||(r.children().adopt(e,i,n).each(function(e){e.jQ.insertBefore(t.jQ.first())}),i=r.ends[we])}),!this[we])if(this[xe])this[we]=this[xe][we];else for(;!this[we];){if(this.parent=this.parent[we],!this.parent){this[we]=t[we],this.parent=e;break}this[we]=this.parent.ends[xe]}this[we]?this.insLeftOf(this[we]):this.insAtRightEnd(e),t.jQ.remove(),t[xe].siblingDeleted&&t[xe].siblingDeleted(we),t[we].siblingDeleted&&t[we].siblingDeleted(xe)},t.select=function(){var t,e,n,i,r=this.anticursor;return this[xe]===r[xe]&&this.parent===r.parent?!1:(t=Oe.between(this,r),e=t.ends[xe],n=t.ends[we],i=e.parent,i.selectChildren(this.hide(),e,n),this.selectionChanged(),!0)},t.startSelection=function(){this.anticursor=ke.copy(this)},t.endSelection=function(){delete this.anticursor},t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},t.deleteSelection=function(){this.selection&&(this[xe]=this.selection.ends[xe][xe],this[we]=this.selection.ends[we][we],this.selection.remove(),this.selectionChanged(),delete this.selection)},t.replaceSelection=function(){var t=this.selection;return t&&(this[xe]=t.ends[xe][xe],this[we]=t.ends[we][we],delete this.selection),t}}),qe=ve(Oe,function(t,e){t.init=function(t,n){var i=this;e.init.call(i,t,n||t),i.jQwrap(i.jQ)},t.jQwrap=function(t){this.jQ=t.wrapAll('<span class="selection"></span>').parent()},t.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),e.adopt.apply(this,arguments)},t.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},t.join=function(t){return this.fold("",function(e,n){return e+n[t]()})}}),Le=ve(function(t){t.init=function(t,e){this.root=t,this.cursor=Te(t),this.container=e};var e=[];this.onNotify=function(t){e.push(t)},t.notify=function(){for(var t=0;t<e.length;t+=1)e[t].apply(this.cursor,arguments);return this}});o.noConflict=function(){return window.MathQuill=p,o},p=window.MathQuill,window.MathQuill=o,d=ve(function(t){t.init=function(){throw"wtf don't call me, I'm 'abstract'"},t.initRoot=function(t,e){t.jQ=ye('<span class="mathquill-root-block"/>').attr(de,t.id).appendTo(e);var n=this.controller=t.controller=Le(t,e);n.API=this,t.cursor=n.cursor,n.createTextarea()},t.initExtractContents=function(t){var e=t.contents().detach();return this.revert=function(){t.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(e)},e.text()},t.el=function(){return this.controller.container[0]},t.text=function(){return this.controller.exportText()},t.latex=function(t){return arguments.length>0?(this.controller.renderLatexMath(t),this.controller.blurred&&this.controller.cursor.hide().parent.blur(),this):this.controller.exportLatex()},t.html=function(){return this.controller.root.jQ.html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"")},t.redraw=function(){return this.controller.root.postOrder("edited"),this}}),o.prototype=d.prototype,c("StaticMath",ve(d,function(t){t.init=function(t){var e=this.initExtractContents(t);this.initRoot(k(),t.addClass("mathquill-rendered-math")),this.controller.renderLatexMath(e),this.controller.delegateMouseEvents(),this.controller.staticMathTextareaEvents()}})),m=o.EditableField=ve(d,function(e){e.initEvents=function(){this.controller.editable=!0,this.controller.delegateMouseEvents(),this.controller.editablesTextareaEvents()},e.focus=function(){return this.controller.textarea.focus(),this},e.blur=function(){return this.controller.textarea.blur(),this},e.write=function(t){return this.controller.writeLatex(t),this.controller.blurred&&this.controller.cursor.hide().parent.blur(),this},e.cmd=function(){var t=this.controller.notify(),e=t.cursor.show(),n=e.replaceSelection();return/^\\[a-z]+$/i.test(latex)?e.insertCmd(latex.slice(1),n):e.parent.write(latex,n),t.blurred&&e.hide().parent.blur(),this},e.select=function(){var t=this.controller;for(t.notify("move").cursor.insAtRightEnd(t.root);t.cursor[xe];)t.selectLeft();return this},e.clearSelection=function(){return this.controller.cursor.clearSelection(),this},e.moveToDirEnd=function(t){return this.controller.notify("move").cursor.insAtDirEnd(t,this.controller.root),this},e.moveToLeftEnd=function(){return this.moveToDirEnd(xe)},e.moveToRightEnd=function(){return this.moveToDirEnd(we)},e.keystroke=function(e){return this.controller.keystroke(e,{preventDefault:t}),this},e.typedText=function(t){return this.controller.typedText(t),this}}),c("MathField",ve(m,function(t){t.init=function(t,e){t.addClass("mathquill-rendered-math mathquill-editable");var n=this.initExtractContents(t);this.initRoot(j(),t),this.controller.root.setHandlers(e&&e.handlers,this),this.controller.spaceBehavesLikeTab=e&&e.spaceBehavesLikeTab,this.controller.renderLatexMath(n),this.initEvents()}})),c("TextField",ve(m,function(t){t.init=function(t){var e=this.initExtractContents(t);this.initRoot(T(),t.addClass("mathquill-editable")),this.controller.renderLatexText(e),this.initEvents()},t.latex=function(t){return arguments.length>0?(this.controller.renderLatexText(t),this.controller.blurred&&this.controller.cursor.hide().parent.blur(),this):this.controller.exportLatex()}})),fe(function(){fe(".mathquill-embedded-latex").each(function(){o.StaticMath(this)}),fe(".mathquill-editable").each(function(){o.MathField(this)}),fe(".mathquill-textbox").each(function(){o.TextField(this)})}),g=ve(function(t,e,n){function i(t,e){throw t=t?"'"+t+"'":"EOF","Parse Error: "+e+" at "+t}var s,a,o,c,l,u,h,f,p,d,m,g,b;t.init=function(t){this._=t},t.parse=function(t){function e(t,e){return e}return this.skip(b)._(t,e,i)},t.or=function(t){r("or is passed a parser",t instanceof n);var e=this;return n(function(n,i,r){function s(){return t._(n,i,r)}return e._(n,i,s)})},t.then=function(t){var e=this;return n(function(i,s,a){function o(e,i){var o=t instanceof n?t:t(i);return r("a parser is returned",o instanceof n),o._(e,s,a)}return e._(i,o,a)})},t.many=function(){var t=this;return n(function(e,n){function i(t,n){return e=t,s.push(n),!0}function r(){return!1}for(var s=[];t._(e,i,r););return n(e,s)})},t.times=function(t,e){arguments.length<2&&(e=t);var i=this;return n(function(n,r,s){function a(t,e){return h.push(e),n=t,!0}function o(t,e){return l=e,n=t,!1}function c(){return!1}var l,u,h=[],f=!0;for(u=0;t>u;u+=1)if(f=i._(n,a,o),!f)return s(n,l);for(;e>u&&f;u+=1)f=i._(n,a,c);return r(n,h)})},t.result=function(t){return this.then(o(t))},t.atMost=function(t){return this.times(0,t)},t.atLeast=function(t){var e=this;return e.times(t).then(function(t){return e.many().map(function(e){return t.concat(e)})})},t.map=function(t){return this.then(function(e){return o(t(e))})},t.skip=function(t){return this.then(function(e){return t.result(e)})},s=this.string=function(t){var e=t.length,i="expected '"+t+"'";return n(function(n,r,s){var a=n.slice(0,e);return a===t?r(n.slice(e),a):s(n,i)})},a=this.regex=function(t){r("regexp parser is anchored","^"===t.toString().charAt(1));var e="expected "+t;return n(function(n,i,r){var s,a=t.exec(n);return a?(s=a[0],i(n.slice(s.length),s)):r(n,e)})},o=n.succeed=function(t){return n(function(e,n){return n(e,t)})},c=n.fail=function(t){return n(function(e,n,i){return i(e,t)})},l=n.letter=a(/^[a-z]/i),u=n.letters=a(/^[a-z]*/i),h=n.digit=a(/^[0-9]/),f=n.digits=a(/^[0-9]*/),p=n.whitespace=a(/^\s+/),d=n.optWhitespace=a(/^\s*/),m=n.any=n(function(t,e,n){return t?e(t.slice(1),t.charAt(0)):n(t,"expected any character")}),g=n.all=n(function(t,e){return e("",t)}),b=n.eof=n(function(t,e,n){return t?n(t,"expected EOF"):e(t,t)})}),b=function(){function e(t){var e,i=t.which||t.keyCode,r=n[i],s=[];return t.ctrlKey&&s.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&s.push("Meta"),t.altKey&&s.push("Alt"),t.shiftKey&&s.push("Shift"),e=r||String.fromCharCode(i),s.length||r?(s.push(e),s.join("-")):e}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,i){function r(t){w=t,clearTimeout(m),m=setTimeout(t)}function s(e){w(),w=t,clearTimeout(m),v.val(e),e&&v[0].select()}function a(){var t=v[0];return"selectionStart"in t?t.selectionStart!==t.selectionEnd:!1}function o(t){var e=v.val();v.val(""),e&&t(e)}function c(){i.keystroke(e(g),g)}function l(t){g=t,b=null,c()}function u(t){g&&b&&c(),b=t,r(h)}function h(){a()||o(function(t){i.typedText(t)})}function f(){g=b=null}function p(){v.focus(),r(d)}function d(){o(function(t){i.paste(t)})}var m,g=null,b=null,v=fe(n),x=fe(i.container||v),w=t;return x.bind("keydown keypress input keyup focusout paste",function(){w()}),x.bind({keydown:l,keypress:u,focusout:f,paste:p}),{select:s}}}(),Le.open(function(t){t.exportText=function(){return this.root.foldChildren("",function(t,e){return t+e.text()})}}),Le.open(function(t){t.focusBlurEvents=function(){var t=this,e=t.root,n=t.cursor;t.textarea.focus(function(){t.blurred=!1,n.parent||n.insAtRightEnd(e),n.parent.jQ.addClass("hasCursor"),n.selection?(n.selection.jQ.removeClass("blur"),t.selectionChanged()):n.show()}).blur(function(){t.blurred=!0,n.hide().parent.blur(),n.selection&&n.selection.jQ.addClass("blur")}).blur()}}),Le.open(function(t){t.keystroke=function(t,e){this.cursor.parent.keystroke(t,e,this)}}),je.open(function(t){t.keystroke=function(t,e,n){var i=n.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":for(;i[xe]||i.selection;)n.backspace();break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(we,t,e);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(xe,t,e);case"End":n.notify("move").cursor.insAtRightEnd(i.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;i[we];)n.selectRight();break;case"Ctrl-Shift-End":for(;i[we]||i.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(i.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;i[xe];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;i[xe]||i.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(i[xe])for(;i[xe];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(i[we])for(;i[we];)n.selectRight();else n.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":for(;i[we]||i.selection;)n.deleteForward();break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);i[xe];)n.selectLeft();break;default:return}e.preventDefault()},t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){r("overridden or never called on this node")}}),Le.open(function(t){function e(t,e){var n=t.notify("upDown").cursor,i=e+"Into",r=e+"OutOf";return n[we][i]?n.insAtLeftEnd(n[we][i]):n[xe][i]?n.insAtRightEnd(n[xe][i]):n.parent.bubble(function(t){var e=t[r];return e&&("function"==typeof e&&(e=t[r](n)),e instanceof je&&n.jumpUpDown(t,e),e!==!0)?!1:void 0}),t}this.onNotify(function(t){("move"===t||"upDown"===t)&&this.show().clearSelection()}),t.escapeDir=function(t,e,n){s(t);var i=this.cursor;return i.parent!==this.root&&n.preventDefault(),i.parent!==this.root?(i.parent.moveOutOf(t,i),this.notify("move")):void 0},t.moveDir=function(t){s(t);var e=this.cursor;return e.selection?e.insDirOf(t,e.selection.ends[t]):e[t]?e[t].moveTowards(t,e):e.parent.moveOutOf(t,e),this.notify("move")},t.moveLeft=function(){return this.moveDir(xe)},t.moveRight=function(){return this.moveDir(we)},t.moveUp=function(){return e(this,"up")},t.moveDown=function(){return e(this,"down")},this.onNotify(function(t){"upDown"!==t&&(this.upDownCache={})}),this.onNotify(function(t){"edit"===t&&this.show().deleteSelection()}),t.deleteDir=function(t){var e,n;return s(t),e=this.cursor,n=e.selection,this.notify("edit"),n||(e[t]?e[t].deleteTowards(t,e):e.parent.deleteOutOf(t,e)),e[xe].siblingDeleted&&e[xe].siblingDeleted(we),e[we].siblingDeleted&&e[we].siblingDeleted(xe),e.parent.bubble("edited"),this},t.backspace=function(){return this.deleteDir(xe)},t.deleteForward=function(){return this.deleteDir(we)},this.onNotify(function(t){"select"!==t&&this.endSelection()}),t.selectDir=function(t){var e,n=this.notify("select").cursor,i=n.selection;s(t),n.anticursor||n.startSelection(),e=n[t],e?i&&i.ends[t]===e&&n.anticursor[-t]!==e?e.unselectInto(t,n):e.selectTowards(t,n):n.parent.selectOutOf(t,n),n.clearSelection(),n.select()||n.show()},t.selectLeft=function(){return this.selectDir(xe)},t.selectRight=function(){return this.selectDir(we)}}),v=function(){function t(t){var e=k();return t.adopt(e,0,0),e}function e(t){var e,n=t[0]||k();for(e=1;e<t.length;e+=1)t[e].children().adopt(n,n.ends[we],0);return n}var n=g.string,i=g.regex,r=g.letter,s=g.any,a=g.optWhitespace,o=g.succeed,c=g.fail,l=r.map(function(t){return ee(t)}),u=i(/^[^${}\\_^]/).map(function(t){return ae(t)}),h=i(/^[^\\a-eg-zA-Z]/).or(n("\\").then(i(/^[a-z]+/i).or(i(/^\s+/).result(" ")).or(s))).then(function(t){var e=Qe[t];return e?e(t).parser():c("unknown command: \\"+t)}),f=h.or(l).or(u),p=n("{").then(function(){return m}).skip(n("}")),d=a.then(p.or(f.map(t))),m=d.many().map(e).skip(a),b=n("[").then(d.then(function(t){return"]"!==t.join("latex")?o(t):c()}).many().map(e).skip(a)).skip(n("]")),v=m;return v.block=d,v.optBlock=b,v}(),Le.open(function(t){t.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},t.writeLatex=function(t){var e,n=this.notify("edit").cursor,i=g.all,r=g.eof,s=v.skip(r).or(i.result(!1)).parse(t);return s&&(s.children().adopt(n.parent,n[xe],n[we]),e=s.jQize(),e.insertBefore(n.jQ),n[xe]=s.ends[we],s.finalizeInsert(n),s.ends[we][we].siblingCreated&&s.ends[we][we].siblingCreated(xe),s.ends[xe][xe].siblingCreated&&s.ends[xe][xe].siblingCreated(we),n.parent.bubble("edited")),this},t.renderLatexMath=function(t){var e,n,i=this.root,r=this.cursor,s=g.all,a=g.eof,o=v.skip(a).or(s.result(!1)).parse(t);i.eachChild("postOrder","dispose"),i.ends[xe]=i.ends[we]=0,o&&o.children().adopt(i,0,0),e=i.jQ,o?(n=o.join("html"),e.html(n),i.jQize(e.children()),i.finalizeInsert()):e.empty(),r.insAtRightEnd(i)},t.renderLatexText=function(t){var e,n,i,r,s,a,o,c,l,u,h=this.root,f=this.cursor;if(h.jQ.children().slice(1).remove(),h.eachChild("postOrder","dispose"),h.ends[xe]=h.ends[we]=0,delete f.selection,f.show().insAtRightEnd(h),e=g.regex,n=g.string,i=g.eof,r=g.all,s=n("$").then(v).skip(n("$").or(i)).map(function(t){var e,n=C(f);return n.createBlocks(),e=n.ends[xe],t.children().adopt(e,0,0),n}),a=n("\\$").result("$"),o=a.or(e(/^[^$]/)).map(ae),c=s.or(o).many(),l=c.skip(i).or(r.result(!1)).parse(t)){for(u=0;u<l.length;u+=1)l[u].adopt(h,h.ends[we],0);h.jQize().appendTo(h.jQ),h.finalizeInsert()}}}),Le.open(function(e){e.delegateMouseEvents=function(){var e=this.root.jQ;this.container.bind("mousedown.mathquill",function(n){function i(t){c.seek(ye(t.target),t.pageX,t.pageY).cursor.select(),l.selection&&l.insRightOf(l.selection.ends[we])}function r(t){return delete t.target,i(t)}function s(t){l.endSelection(),l.blink=u,l.selection||(c.editable?l.show():h.detach()),a.unbind("mousemove",i),ye(t.target.ownerDocument).unbind("mousemove",r).unbind("mouseup",s)}var a=ye(n.target).closest(".mathquill-root-block"),o=je.byId[a.attr(de)||e.attr(de)],c=o.controller,l=c.cursor,u=l.blink,h=c.textareaSpan,f=c.textarea;setTimeout(function(){c.blurred&&f.focus()}),l.blink=t,c.seek(ye(n.target),n.pageX,n.pageY).cursor.startSelection(),!c.editable&&c.blurred&&a.prepend(h),a.mousemove(i),ye(n.target.ownerDocument).mousemove(r).mouseup(s)})}}),Le.open(function(t){t.seek=function(t,e){var n,i,s=this.notify("select").cursor,a=t.attr(de)||t.attr(pe);return a||(n=t.parent(),a=n.attr(de)||n.attr(pe)),i=a?je.byId[a]:this.root,r("nodeId is the id of some Node that exists",i),s.clearSelection().show(),i.seek(e,s),this}}),Le.open(function(t){t.createTextarea=function(){{var t,e=this.textareaSpan=this.root.textareaSpan=ye('<span class="textarea"><textarea></textarea></span>');this.textarea=e.children()}this.container.bind("selectstart.mathquill",function(t){var e=t.target.tagName;return e&&"textarea"===e.toLowerCase()?void 0:!1}),t=this,t.cursor.selectionChanged=function(){t.selectionChanged()},t.container.bind("copy",function(){t.setTextareaSelection()})},t.selectionChanged=function(){var t=this;L(t.container[0]),t.textareaSelectionTimeout===f&&(t.textareaSelectionTimeout=setTimeout(function(){t.setTextareaSelection()}))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=f;var t="";this.cursor.selection&&(t="$"+this.cursor.selection.join("latex")+"$"),this.selectFn(t)},t.staticMathTextareaEvents=function(){function t(){r.detach(),e.blurred=!0}var e=this,n=(e.root,e.cursor),i=e.textarea,r=e.textareaSpan;this.container.prepend('<span class="selectable">$'+e.exportLatex()+"$</span>"),e.blurred=!0,i.bind("cut paste",!1).focus(function(){e.blurred=!1}).blur(function(){n.selection&&n.selection.clear(),setTimeout(t)}),e.selectFn=function(t){i.val(t),t&&i.select()}},t.editablesTextareaEvents=function(){var t=this,e=(t.root,t.cursor),n=t.textarea,i=t.textareaSpan,r=b(n,this);this.selectFn=function(t){r.select(t)},this.container.prepend(i).on("cut",function(){e.selection&&setTimeout(function(){t.notify("edit"),e.parent.bubble("edited")})}),this.focusBlurEvents()},t.typedText=function(t){if("\n"===t)return void(this.root.handlers.enter&&this.root.handlers.enter(this.API));var e=this.notify().cursor;e.parent.write(e,t,e.show().replaceSelection())},t.paste=function(t){t="$"===t.slice(0,1)&&"$"===t.slice(-1)?t.slice(1,-1):"\\text{"+t+"}",this.writeLatex(t).cursor.show()}}),x=ve(je,function(t){t.finalizeInsert=function(t){var e=this;e.postOrder("finalizeTree"),e.postOrder("contactWeld",t),e.postOrder("blur"),e.postOrder("edited"),e[we].siblingCreated&&e[we].siblingCreated(xe),e[xe].siblingCreated&&e[xe].siblingCreated(we),e.bubble("edited")}}),w=ve(x,function(t,e){t.init=function(t,n,i){var r=this;e.init.call(r),r.ctrlSeq||(r.ctrlSeq=t),n&&(r.htmlTemplate=n),i&&(r.textTemplate=i)},t.replaces=function(t){t.disown(),this.replacedFragment=t},t.isEmpty=function(){return this.foldChildren(!0,function(t,e){return t&&e.isEmpty()})},t.parser=function(){var t=v.block,e=this;return t.times(e.numBlocks()).map(function(t){e.blocks=t;for(var n=0;n<t.length;n+=1)t[n].adopt(e,e.ends[we],0);return e})},t.createLeftOf=function(t){var n=this,i=n.replacedFragment;n.createBlocks(),e.createLeftOf.call(n,t),i&&(i.adopt(n.ends[xe],0,0),i.jQ.appendTo(n.ends[xe].jQ)),n.finalizeInsert(),n.placeCursor(t)},t.createBlocks=function(){var t,e,n=this,i=n.numBlocks(),r=n.blocks=Array(i);for(t=0;i>t;t+=1)e=r[t]=k(),e.adopt(n,n.ends[we],0)},t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[xe],function(t,e){return t.isEmpty()?t:e}))},t.moveTowards=function(t,e){e.insAtDirEnd(-t,this.ends[-t])},t.deleteTowards=function(t,e){e.startSelection(),this.selectTowards(t,e),e.select()},t.selectTowards=function(t,e){e.anticursor||e.startSelection(),e[-t]=this,e[t]=this[t]},t.selectChildren=function(t){t.selection=qe(this)},t.unselectInto=function(t,e){e.insAtDirEnd(-t,this.selectedOutOf)},t.seek=function(t,e){function n(t){var e={};return e[xe]=t.jQ.offset().left,e[we]=e[xe]+t.jQ.outerWidth(),e}var i,r=this,s=n(r);return t<s[xe]?e.insLeftOf(r):t>s[we]?e.insRightOf(r):(i=s[xe],void r.eachChild(function(a){var o=n(a);return t<o[xe]?(t-i<o[xe]-t?a[xe]?e.insAtRightEnd(a[xe]):e.insLeftOf(r):e.insAtLeftEnd(a),!1):t>o[we]?void(a[we]?i=o[we]:s[we]-t<t-o[we]?e.insRightOf(r):e.insAtRightEnd(a)):(a.seek(t,e),!1)}))},t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0},t.html=function(){var t,e,n,i=this,s=i.blocks,a=" mathquill-command-id="+i.id,o=i.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);for(r("no unmatched angle brackets",o.join("")===this.htmlTemplate),t=0,e=o[0];e;t+=1,e=o[t])if("/>"===e.slice(-2))o[t]=e.slice(0,-2)+a+"/>";else if("<"===e.charAt(0)){r("not an unmatched top-level close tag","/"!==e.charAt(1)),o[t]=e.slice(0,-1)+a+">",n=1;do t+=1,e=o[t],r("no missing close tags",e),"</"===e.slice(0,2)?n-=1:"<"===e.charAt(0)&&"/>"!==e.slice(-2)&&(n+=1);while(n>0)}return o.join("").replace(/>&(\d+)/g,function(t,e){return" mathquill-block-id="+s[e].id+">"+s[e].join("html")})},t.latex=function(){return this.foldChildren(this.ctrlSeq,function(t,e){return t+"{"+(e.latex()||" ")+"}"})},t.textTemplate=[""],t.text=function(){var t=this,e=0;return t.foldChildren(t.textTemplate[e],function(n,i){e+=1;var r=i.text();return n&&"("===t.textTemplate[e]&&"("===r[0]&&")"===r.slice(-1)?n+r.slice(1,-1)+t.textTemplate[e]:n+i.text()+(t.textTemplate[e]||"")})}}),y=ve(w,function(e,n){e.init=function(t,e,i){i||(i=t&&t.length>1?t.slice(1):t),n.init.call(this,t,e,[i])},e.parser=function(){return g.succeed(this)},e.numBlocks=function(){return 0},e.replaces=function(t){t.remove()},e.createBlocks=t,e.moveTowards=function(t,e){e.jQ.insDirOf(t,this.jQ),e[-t]=this,e[t]=this[t]},e.deleteTowards=function(t,e){e[t]=this.remove()[t]},e.seek=function(t,e){t-this.jQ.offset().left<this.jQ.outerWidth()/2?e.insLeftOf(this):e.insRightOf(this)},e.latex=function(){return this.ctrlSeq},e.text=function(){return this.textTemplate},e.placeCursor=t,e.isEmpty=function(){return!0}}),k=ve(x,function(t,e){t.join=function(t){return this.foldChildren("",function(e,n){return e+n[t]()})},t.html=function(){return this.join("html")},t.latex=function(){return this.join("latex")},t.text=function(){return this.ends[xe]===this.ends[we]?this.ends[xe].text():"("+this.join("text")+")"},t.keystroke=function(t,n,i){return!i.spaceBehavesLikeTab||"Spacebar"!==t&&"Shift-Spacebar"!==t?e.keystroke.apply(this,arguments):(n.preventDefault(),void i.escapeDir("Shift-Spacebar"===t?xe:we,t,n))},t.moveOutOf=function(t,e){this[t]?e.insAtDirEnd(-t,this[t]):e.insDirOf(t,this.parent)},t.selectOutOf=function(t,e){e.insDirOf(t,this.parent),this.parent.selectedOutOf=this},t.deleteOutOf=function(t,e){e.unwrapGramp()},t.selectChildren=function(t,e,n){t.selection=qe(e,n)},t.seek=function(t,e){var n=this.ends[we];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<t)return e.insAtRightEnd(this);if(t<this.ends[xe].jQ.offset().left)return e.insAtLeftEnd(this);for(;t<n.jQ.offset().left;)n=n[xe];return n.seek(t,e)},t.write=function(t,e,n){var i;i=e.match(/^[a-eg-zA-Z]$/)?ee(e):(i=Ce[e]||Qe[e])?i(e):ae(e),n&&i.replaces(n),i.createLeftOf(t)},t.focus=function(){return this.jQ.addClass("hasCursor"),this.jQ.removeClass("empty"),this},t.blur=function(){return this.jQ.removeClass("hasCursor"),this.isEmpty()&&this.jQ.addClass("empty"),this}}),j=ve(k,l),O=ve(je,function(t,e){function n(t){var e,n;return t.jQ[0].normalize(),e=t.jQ[0].firstChild,n=Q(e.data),n.jQadd(e),t.children().disown(),n.adopt(t,0,0)}t.ctrlSeq="\\text",t.replaces=function(t){t instanceof Oe?this.replacedText=t.remove().jQ.text():"string"==typeof t&&(this.replacedText=t)},t.jQadd=function(t){e.jQadd.call(this,t),this.ends[xe]&&this.ends[xe].jQadd(this.jQ[0].firstChild)},t.createLeftOf=function(t){var n,i=this;if(e.createLeftOf.call(this,t),i[we].siblingCreated&&i[we].siblingCreated(xe),i[xe].siblingCreated&&i[xe].siblingCreated(we),i.bubble("edited"),t.insAtRightEnd(i),i.replacedText)for(n=0;n<i.replacedText.length;n+=1)i.write(t,i.replacedText.charAt(n))},t.parser=function(){var t=this,e=g.string,n=g.regex,i=g.optWhitespace;return i.then(e("{")).then(n(/^[^}]*/)).skip(e("}")).map(function(e){return Q(e).adopt(t,0,0),t})},t.textContents=function(){return this.foldChildren("",function(t,e){return t+e.text})},t.text=function(){return'"'+this.textContents()+'"'},t.latex=function(){return"\\text{"+this.textContents()+"}"},t.html=function(){return'<span class="text" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"
},t.moveTowards=function(t,e){e.insAtDirEnd(-t,this)},t.moveOutOf=function(t,e){e.insDirOf(t,this)},t.unselectInto=t.moveTowards,t.selectTowards=w.prototype.selectTowards,t.deleteTowards=w.prototype.deleteTowards,t.selectChildren=k.prototype.selectChildren,t.selectOutOf=function(t,e){e.insDirOf(t,this)},t.deleteOutOf=function(t,e){this.isEmpty()&&e.insRightOf(this)},t.write=function(t,n,i){var r,s;i&&i.remove(),"$"!==n?t[xe]?t[xe].appendText(n):Q(n).createLeftOf(t):this.isEmpty()?(t.insRightOf(this),ae("\\$","$").createLeftOf(t)):t[we]?t[xe]?(r=O(),s=this.ends[xe],s.disown(),s.adopt(r,0,0),t.insLeftOf(this),e.createLeftOf.call(r,t)):t.insLeftOf(this):t.insRightOf(this)},t.seek=function(t,e){var i,r,s,a,o,c,l,u;for(e.hide(),i=n(this),r=this.jQ.width()/this.text.length,s=Math.round((t-this.jQ.offset().left)/r),0>=s?e.insAtLeftEnd(this):s>=i.text.length?e.insAtRightEnd(this):e.insLeftOf(i.splitRight(s)),a=t-e.show().offset().left,o=a&&0>a?xe:we,c=o;e[o]&&a*c>0;)e[o].moveTowards(o,e),c=a,a=t-e.offset().left;-o*c>o*a&&e[-o].moveTowards(-o,e),e.anticursor?e.anticursor.parent===this&&(l=e[xe]&&e[xe].text.length,this.anticursorPosition===l?e.anticursor=ke.copy(e):(this.anticursorPosition<l?(u=e[xe].splitRight(this.anticursorPosition),e[xe]=u):u=e[we].splitRight(this.anticursorPosition-l),e.anticursor=ke(this,u[xe],u))):this.anticursorPosition=e[xe]&&e[xe].text.length},t.blur=function(){k.prototype.blur.call(this),n(this)},t.focus=k.prototype.focus}),Q=ve(je,function(t,e){function n(t,e){return e.charAt(t===xe?0:-1+e.length)}t.init=function(t){e.init.call(this),this.text=t},t.jQadd=function(t){this.dom=t,this.jQ=ye(t)},t.jQize=function(){return this.jQadd(document.createTextNode(this.text))},t.appendText=function(t){this.text+=t,this.dom.appendData(t)},t.prependText=function(t){this.text=t+this.text,this.dom.insertData(0,t)},t.insTextAtDirEnd=function(t,e){s(e),e===we?this.appendText(t):this.prependText(t)},t.splitRight=function(t){var e=Q(this.text.slice(t)).adopt(this.parent,this,this[we]);return e.jQadd(this.dom.splitText(t)),this.text=this.text.slice(0,t),e},t.moveTowards=function(t,e){var i,r;return s(t),i=n(-t,this.text),r=this[-t],r?r.insTextAtDirEnd(i,t):Q(i).createDir(-t,e),this.deleteTowards(t,e)},t.latex=function(){return this.text},t.deleteTowards=function(t,e){this.text.length>1?t===we?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),e[t]=this[t])},t.selectTowards=function(t,e){var i,r,a,o;return s(t),i=e.anticursor,r=n(-t,this.text),i&&i[t]!==this?(o=this[-t],o?o.insTextAtDirEnd(r,t):(a=Q(r).createDir(-t,e),a.jQ.insDirOf(-t,e.selection.jQ)),1===this.text.length&&i[-t]===this&&(i[-t]=this[-t])):(a=Q(r).createDir(t,e),e.startSelection(),e.insDirOf(t,a)),this.deleteTowards(t,e)}}),Ce.$=Qe.text=Qe.textnormal=Qe.textrm=Qe.textup=Qe.textmd=O,Qe.em=Qe.italic=Qe.italics=Qe.emph=Qe.textit=Qe.textsl=u("\\textit","i",'class="text"'),Qe.strong=Qe.bold=Qe.textbf=u("\\textbf","b",'class="text"'),Qe.sf=Qe.textsf=u("\\textsf","span",'class="sans-serif text"'),Qe.tt=Qe.texttt=u("\\texttt","span",'class="monospace text"'),Qe.textsc=u("\\textsc","span",'style="font-variant:small-caps" class="text"'),Qe.uppercase=u("\\uppercase","span",'style="text-transform:uppercase" class="text"'),Qe.lowercase=u("\\lowercase","span",'style="text-transform:lowercase" class="text"'),C=ve(w,function(t,e){t.init=function(t){e.init.call(this,"$"),this.cursor=t},t.htmlTemplate='<span class="mathquill-rendered-math">&0</span>',t.createBlocks=function(){e.createBlocks.call(this),this.ends[xe].cursor=this.cursor,this.ends[xe].write=function(t,e,n){"$"!==e?k.prototype.write.call(this,t,e,n):this.isEmpty()?(t.insRightOf(this.parent),this.parent.deleteTowards(dir,t),ae("\\$","$").createLeftOf(t.show())):t[we]?t[xe]?k.prototype.write.call(this,t,e,n):t.insLeftOf(this.parent):t.insRightOf(this.parent)}},t.latex=function(){return"$"+this.ends[xe].latex()+"$"}}),T=ve(j,function(t,e){t.keystroke=function(t){return"Spacebar"!==t&&"Shift-Spacebar"!==t?e.keystroke.apply(this,arguments):void 0},t.write=function(t,e,n){if(n&&n.remove(),"$"===e)C(t).createLeftOf(t);else{var i;"<"===e?i="&lt;":">"===e&&(i="&gt;"),ae(e,i).createLeftOf(t)}}}),L=t,E=document.createElement("div"),S=E.style,D={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(R in D)if(R in S){A=R;break}A?q=function(t,e,n){t.css(A,"scale("+e+","+n+")")}:"filter"in S?(L=function(t){t.className=t.className},q=function(t,e,n){function i(){t.css("marginRight",(r.width()-1)*(e-1)/e+"px")}var r,s;e/=1+(n-1)/2,t.css("fontSize",n+"em"),t.hasClass("matrixed-container")||t.addClass("matrixed-container").wrapInner('<span class="matrixed"></span>'),r=t.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+e+",SizingMethod='auto expand')"),i(),s=setInterval(i),ye(window).load(function(){clearTimeout(s),i()})}):q=function(t,e,n){t.css("fontSize",n+"em")},I=ve(w,function(t,e){t.init=function(t,n,i){e.init.call(this,t,"<"+n+" "+i+">&0</"+n+">")}}),Qe.mathrm=i(I,"\\mathrm","span",'class="roman font"'),Qe.mathit=i(I,"\\mathit","i",'class="font"'),Qe.mathbf=i(I,"\\mathbf","b",'class="font"'),Qe.mathsf=i(I,"\\mathsf","span",'class="sans-serif font"'),Qe.mathtt=i(I,"\\mathtt","span",'class="monospace font"'),Qe.underline=i(I,"\\underline","span",'class="non-leaf underline"'),Qe.overline=Qe.bar=i(I,"\\overline","span",'class="non-leaf overline"'),z=Qe.textcolor=ve(w,function(t,e){t.setColor=function(t){this.color=t,this.htmlTemplate='<span class="mq-textcolor" style="color:'+t+'">&0</span>'},t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},t.parser=function(){var t=this,n=g.optWhitespace,i=g.string,r=g.regex;return n.then(i("{")).then(r(/^[#\w\s.,()%-]*/)).skip(i("}")).then(function(n){return t.setColor(n),e.parser.call(t)})}}),B=Qe["class"]=ve(w,function(t,e){t.parser=function(){var t=this,n=g.string,i=g.regex;return g.optWhitespace.then(n("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n){return t.htmlTemplate='<span class="mq-class '+n+'">&0</span>',e.parser.call(t)})}}),M=ve(w,function(t){t.ctrlSeq="_{...}^{...}",t.contactWeld=function(t){var e,n,i,r,s,a;for(e=xe;e;e=e===xe?we:!1)if(this[e]instanceof M){for(n="sub";n;n="sub"===n?"sup":!1)i=this[n],r=this[e][n],i&&(r?i.isEmpty()?a=ke(r,0,r.ends[xe]):(i.jQ.children().insAtDirEnd(-e,r.jQ),s=i.children().disown(),a=ke(r,s.ends[we],r.ends[xe]),e===xe?s.adopt(r,r.ends[we],0):s.adopt(r,0,r.ends[xe])):this[e].addBlock(i.disown()),this.placeCursor=function(t,n){return function(i){i.insAtDirEnd(-e,t||n)}}(r,i));this.remove(),t&&t[xe]===this&&(e===we&&a?a[xe]?t.insRightOf(a[xe]):t.insAtLeftEnd(a.parent):t.insRightOf(this[e]));break}this.respace()},t.latex=function(){function t(t,e){var n=e&&e.latex();return e?t+(1===n.length?n:"{"+(n||" ")+"}"):""}return t("_",this.sub)+t("^",this.sup)},t.respace=t.siblingCreated=t.siblingDeleted=function(t){return t!==we?("\\int "===this[xe].ctrlSeq?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit")),this):void 0},t.addBlock=function(t){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=t,t.adopt(this,this.sub,0).downOutOf=this.sub,t.jQ=ye('<span class="sup"/>').append(t.jQ.children()).attr(de,t.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=t,t.adopt(this,0,this.sup).upOutOf=this.sup,t.jQ=ye('<span class="sub"></span>').append(t.jQ.children()).attr(de,t.id).appendTo(this.jQ.removeClass("sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&nbsp;</span>'));for(var e=0;2>e;e+=1)(function(t,e,n){t[e].deleteOutOf=function(i,r){this.isEmpty()?(t.supsub=n,delete t[e],delete t[i+"Into"],t[n][i+"OutOf"]=h,"sub"===e&&ye(t.jQ.addClass("sup-only")[0].lastChild).remove(),this.moveOutOf(i,r),this.remove()):(r.insAtDirEnd(-i,this),r.startSelection(),r.insAtDirEnd(i,this),r.select())}})(this,"sub sup".split(" ")[e],"sup sub".split(" ")[e],"down up".split(" ")[e])}}),Qe.subscript=Qe._=ve(M,function(t){t.supsub="sub",t.htmlTemplate='<span class="supsub non-leaf"><span class="sub">&0</span><span style="display:inline-block;width:0">&nbsp;</span></span>',t.textTemplate=["_"],t.finalizeTree=function(){this.downInto=this.sub=this.ends[xe],this.sub.upOutOf=h}}),Qe.superscript=Qe.supscript=Qe["^"]=ve(M,function(t){t.supsub="sup",t.htmlTemplate='<span class="supsub non-leaf sup-only"><span class="sup">&0</span></span>',t.textTemplate=["**"],t.finalizeTree=function(){this.upInto=this.sup=this.ends[we],this.sup.downOutOf=h}}),F=Qe.frac=Qe.dfrac=Qe.cfrac=Qe.fraction=ve(w,function(t){t.ctrlSeq="\\frac",t.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0">&nbsp;</span></span>',t.textTemplate=["(","/",")"],t.finalizeTree=function(){this.upInto=this.ends[we].upOutOf=this.ends[xe],this.downInto=this.ends[xe].downOutOf=this.ends[we]}}),$=Qe.over=Ce["/"]=ve(F,function(t,e){t.createLeftOf=function(t){if(!this.replacedFragment){for(var n=t[xe];n&&!(n instanceof le||n instanceof O||n instanceof he||/^[,;:]$/.test(n.ctrlSeq));)n=n[xe];n instanceof he&&n[we]instanceof M&&(n=n[we],n[we]instanceof M&&n[we].ctrlSeq!=n.ctrlSeq&&(n=n[we])),n!==t[xe]&&(this.replaces(Oe(n[we]||t.parent.ends[xe],t[xe])),t[xe]=n)}e.createLeftOf.call(this,t)}}),P=Qe.sqrt=Qe["√"]=ve(w,function(t,e){t.ctrlSeq="\\sqrt",t.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>',t.textTemplate=["sqrt(",")"],t.parser=function(){return v.optBlock.then(function(t){return v.block.map(function(e){var n=U();return n.blocks=[t,e],t.adopt(n,0,0),e.adopt(n,t,0),n})}).or(e.parser.call(this))},t.edited=function(){var t=this.ends[we].jQ;q(t.prev(),1,t.innerHeight()/+t.css("fontSize").slice(0,-2)-.1)}}),_=Qe.vec=ve(w,function(t){t.ctrlSeq="\\vec",t.htmlTemplate='<span class="non-leaf"><span class="vector-prefix">&rarr;</span><span class="vector-stem">&0</span></span>',t.textTemplate=["vec(",")"]}),U=Qe.nthroot=ve(P,function(t){t.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>',t.textTemplate=["sqrt[","](",")"],t.latex=function(){return"\\sqrt["+this.ends[xe].latex()+"]{"+this.ends[we].latex()+"}"}}),N=ve(w,function(t,e){t.init=function(t,n,i,r){e.init.call(this,"\\left"+i,'<span class="non-leaf"><span class="scaled paren">'+t+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+n+"</span></span>",[t,n]),this.end="\\right"+r},t.jQadd=function(){e.jQadd.apply(this,arguments);var t=this.jQ;this.bracketjQs=t.children(":first").add(t.children(":last"))},t.latex=function(){return this.ctrlSeq+this.ends[xe].latex()+this.end},t.edited=function(){var t=this.ends[xe].jQ,e=t.outerHeight()/+t.css("fontSize").slice(0,-2);q(this.bracketjQs,me(1+.2*(e-1),1.2),1.05*e)}}),Qe.left=ve(w,function(t){t.parser=function(){var t=g.regex,e=g.string,n=g.succeed,i=g.optWhitespace;return i.then(t(/^(?:[([|]|\\\{)/)).then(function(r){"\\"===r.charAt(0)&&(r=r.slice(1));var s=Ce[r]();return v.map(function(t){s.blocks=[t],t.adopt(s,0,0)}).then(e("\\right")).skip(i).then(t(/^(?:[\])|]|\\\})/)).then(function(t){return t.slice(-1)!==s.end.slice(-1)?g.fail("open doesn't match close"):n(s)})})}}),Qe.right=ve(w,function(t){t.parser=function(){return g.fail("unmatched \\right")}}),Qe.lbrace=Ce["{"]=i(N,"{","}","\\{","\\}"),Qe.langle=Qe.lang=i(N,"&lang;","&rang;","\\langle ","\\rangle "),W=ve(N,function(t,e){t.createLeftOf=function(t){t[we]||!t.parent.parent||t.parent.parent.end!==this.end||this.replacedFragment?e.createLeftOf.call(this,t):t.insRightOf(t.parent.parent)},t.placeCursor=function(t){t.insRightOf(this)}}),Qe.rbrace=Ce["}"]=i(W,"{","}","\\{","\\}"),Qe.rangle=Qe.rang=i(W,"&lang;","&rang;","\\langle ","\\rangle "),H=function(t,e){t.init=function(t,n){e.init.call(this,t,n,t,n)}},G=ve(N,H),Qe.lparen=Ce["("]=i(G,"(",")"),Qe.lbrack=Qe.lbracket=Ce["["]=i(G,"[","]"),K=ve(W,H),Qe.rparen=Ce[")"]=i(K,"(",")"),Qe.rbrack=Qe.rbracket=Ce["]"]=i(K,"[","]"),X=Qe.lpipe=Qe.rpipe=Ce["|"]=ve(G,function(t,e){t.init=function(){e.init.call(this,"|","|")},t.createLeftOf=W.prototype.createLeftOf}),Z=Ce["\\"]=ve(w,function(t,e){t.ctrlSeq="\\",t.replaces=function(t){this._replacedFragment=t.disown(),this.isEmpty=function(){return!1}},t.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>',t.textTemplate=["\\"],t.createBlocks=function(){e.createBlocks.call(this),this.ends[xe].focus=function(){return this.parent.jQ.addClass("hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("empty"),this},this.ends[xe].blur=function(){return this.parent.jQ.removeClass("hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("empty"),this},this.ends[xe].write=function(t,e,n){n&&n.remove(),e.match(/[a-z]/i)?ae(e).createLeftOf(t):(this.parent.renderCommand(),"\\"===e&&this.isEmpty()||this.parent.parent.write(t,e))},this.ends[xe].keystroke=function(t,n,i){return"Tab"===t||"Enter"===t||"Spacebar"===t?(this.parent.renderCommand(i.cursor),void n.preventDefault()):e.keystroke.apply(this,arguments)}},t.createLeftOf=function(t){if(e.createLeftOf.call(this,t),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(t){return ye(t.target=n).trigger(t),!1}).insertBefore(this.jQ).add(this.jQ)}},t.latex=function(){return"\\"+this.ends[xe].latex()+" "},t.renderCommand=function(t){this.jQ=this.jQ.last(),this.remove(),this[we]?t.insLeftOf(this[we]):t.insAtRightEnd(this.parent);var e=this.ends[xe].latex();e||(e="backslash"),t.insertCmd(e,this._replacedFragment)}}),Y=Qe.binom=Qe.binomial=ve(w,function(t){t.ctrlSeq="\\binom",t.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>',t.textTemplate=["choose(",",",")"],t.edited=function(){var t=this.jQ.eq(1),e=t.outerHeight()/+t.css("fontSize").slice(0,-2),n=this.jQ.filter(".paren");q(n,me(1+.2*(e-1),1.2),1.05*e)}}),J=Qe.choose=ve(Y,function(t){t.createLeftOf=$.prototype.createLeftOf}),V=ve(o.MathField,function(t){t.init=function(t,e){l(t);var n=this.controller=t.controller=Le(t,e);n.API=this,n.editable=!0,t.cursor=n.cursor.insAtRightEnd(t),n.createTextarea(),n.editablesTextareaEvents()}}),Qe.MathQuillMathField=ve(w,function(t){t.ctrlSeq="\\MathQuillMathField",t.htmlTemplate='<span class="mathquill-editable"><span class="mathquill-root-block">&0</span></span>',t.finalizeTree=function(){V(this.ends[xe],this.jQ)},t.latex=function(){return this.ends[xe].latex()},t.text=function(){return this.ends[xe].text()}}),Qe.f=i(y,"f",'<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>'),te=ve(y,function(t,e){t.init=function(t,n){e.init.call(this,t,"<var>"+(n||t)+"</var>")},t.text=function(){var t=this.ctrlSeq;return!this[xe]||this[xe]instanceof te||this[xe]instanceof le||(t="*"+t),!this[we]||this[we]instanceof le||"^"===this[we].ctrlSeq||(t+="*"),t}}),ee=ve(te,function(t){t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t){t!==xe&&this[we]instanceof ee||this.autoUnItalicize()},t.autoUnItalicize=function(){var t,e,n,i,r,s,a,o,c=this.ctrlSeq;for(t=this[xe];t instanceof ee;t=t[xe])c=t.ctrlSeq+c;for(e=this[we];e instanceof ee;e=e[we])c+=e.ctrlSeq;Oe(t[we]||this.parent.ends[xe],e[xe]||this.parent.ends[we]).each(function(t){t.jQ.removeClass("un-italicized first last"),delete t.isFirstLetter,delete t.isLastLetter});t:for(n=0,i=t[we]||this.parent.ends[xe];n<c.length;n+=1,i=i[we])for(r=me(ie,c.length-n);r>0;r-=1)if(ne.hasOwnProperty(c.slice(n,n+r))){for(i[xe]instanceof te&&i.jQ.addClass("first"),i.isFirstLetter=!0,s=0,a=i;r>s;s+=1,a=a[we])a.jQ.addClass("un-italicized"),o=a;o.isLastLetter=!0,o[we]instanceof te&&o.jQ.addClass("last"),n+=r-1,i=o;continue t}},t.latex=function(){return this.isFirstLetter?"\\"+this.ctrlSeq:this.isLastLetter?this.ctrlSeq+" ":this.ctrlSeq}}),ne={},ie=9,function(){var t,e,n="Pr arg deg det dim exp gcd hom inf ker lg lim ln log max min sup inj proj".split(" ");for(t=0;t<n.length;t+=1)ne[n[t]]=1;for(e="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<e.length;t+=1)ne[e[t]]=ne["arc"+e[t]]=ne[e[t]+"h"]=ne["ar"+e[t]+"h"]=1}(),re=ve(y,function(t){t.init=function(t){this.ctrlSeq=t},t.createLeftOf=function(t){var e,n=this.ctrlSeq;for(e=0;e<n.length;e+=1)ee(n.charAt(e)).createLeftOf(t)},t.parser=function(){var t,e=this.ctrlSeq,n=k();for(t=0;t<e.length;t+=1)ee(e.charAt(t)).adopt(n,n.ends[we],0);return g.succeed(n.children())}});for(se in ne)ne.hasOwnProperty(se)&&(Qe[se]=re);Qe.injlim=Qe.projlim=Qe.liminf=Qe.limsup=re,ae=ve(y,function(t,e){t.init=function(t,n){e.init.call(this,t,"<span>"+(n||t)+"</span>")}}),Ce[" "]=i(ae,"\\:"," "),Qe.prime=Ce["'"]=i(ae,"'","&prime;"),oe=ve(y,function(t,e){t.init=function(t,n){e.init.call(this,t,'<span class="nonSymbola">'+(n||t)+"</span>")}}),Qe["@"]=oe,Qe["&"]=i(oe,"\\&","&amp;"),Qe["%"]=i(oe,"\\%","%"),Qe.alpha=Qe.beta=Qe.gamma=Qe.delta=Qe.zeta=Qe.eta=Qe.theta=Qe.iota=Qe.kappa=Qe.mu=Qe.nu=Qe.xi=Qe.rho=Qe.sigma=Qe.tau=Qe.chi=Qe.psi=Qe.omega=ve(te,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),Qe.phi=i(te,"\\phi ","&#981;"),Qe.phiv=Qe.varphi=i(te,"\\varphi ","&phi;"),Qe.epsilon=i(te,"\\epsilon ","&#1013;"),Qe.epsiv=Qe.varepsilon=i(te,"\\varepsilon ","&epsilon;"),Qe.piv=Qe.varpi=i(te,"\\varpi ","&piv;"),Qe.sigmaf=Qe.sigmav=Qe.varsigma=i(te,"\\varsigma ","&sigmaf;"),Qe.thetav=Qe.vartheta=Qe.thetasym=i(te,"\\vartheta ","&thetasym;"),Qe.upsilon=Qe.upsi=i(te,"\\upsilon ","&upsilon;"),Qe.gammad=Qe.Gammad=Qe.digamma=i(te,"\\digamma ","&#989;"),Qe.kappav=Qe.varkappa=i(te,"\\varkappa ","&#1008;"),Qe.rhov=Qe.varrho=i(te,"\\varrho ","&#1009;"),Qe.pi=Qe.π=i(oe,"\\pi ","&pi;"),Qe.lambda=i(oe,"\\lambda ","&lambda;"),Qe.Upsilon=Qe.Upsi=Qe.upsih=Qe.Upsih=i(y,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),Qe.Gamma=Qe.Delta=Qe.Theta=Qe.Lambda=Qe.Xi=Qe.Pi=Qe.Sigma=Qe.Phi=Qe.Psi=Qe.Omega=Qe.forall=ve(ae,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),ce=ve(w,function(t){t.init=function(t){this.latex=t},t.createLeftOf=function(t){var e=v.parse(this.latex);e.children().adopt(t.parent,t[xe],t[we]),t[xe]=e.ends[we],e.jQize().insertBefore(t.jQ),e.finalizeInsert(t),e.ends[we][we].siblingCreated&&e.ends[we][we].siblingCreated(xe),e.ends[xe][xe].siblingCreated&&e.ends[xe][xe].siblingCreated(we),t.parent.bubble("edited")},t.parser=function(){var t=v.parse(this.latex).children();return g.succeed(t)}}),Qe["¹"]=i(ce,"^1"),Qe["²"]=i(ce,"^2"),Qe["³"]=i(ce,"^3"),Qe["¼"]=i(ce,"\\frac14"),Qe["½"]=i(ce,"\\frac12"),Qe["¾"]=i(ce,"\\frac34"),le=ve(y,function(t,e){t.init=function(t,n,i){e.init.call(this,t,'<span class="binary-operator">'+n+"</span>",i)}}),ue=ve(le,function(t){t.init=ae.prototype.init,t.contactWeld=t.siblingCreated=t.siblingDeleted=function(){return this.jQ[0].className=this[xe]?this[xe]instanceof le&&this[we]&&!(this[we]instanceof le)?"unary-operator":"binary-operator":"",this}}),Qe["+"]=i(ue,"+","+"),Qe["–"]=Qe["-"]=i(ue,"-","&minus;"),Qe["±"]=Qe.pm=Qe.plusmn=Qe.plusminus=i(ue,"\\pm ","&plusmn;"),Qe.mp=Qe.mnplus=Qe.minusplus=i(ue,"\\mp ","&#8723;"),Ce["*"]=Qe.sdot=Qe.cdot=i(le,"\\cdot ","&middot;"),Qe["="]=i(le,"=","="),Qe["<"]=i(le,"<","&lt;"),Qe[">"]=i(le,">","&gt;"),Qe.notin=Qe.sim=Qe.cong=Qe.equiv=Qe.oplus=Qe.otimes=ve(le,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),Qe.times=i(le,"\\times ","&times;","[x]"),Qe["÷"]=Qe.div=Qe.divide=Qe.divides=i(le,"\\div ","&divide;","[/]"),Qe["≠"]=Qe.ne=Qe.neq=i(le,"\\ne ","&ne;"),Qe.ast=Qe.star=Qe.loast=Qe.lowast=i(le,"\\ast ","&lowast;"),Qe.therefor=Qe.therefore=i(le,"\\therefore ","&there4;"),Qe.cuz=Qe.because=i(le,"\\because ","&#8757;"),Qe.prop=Qe.propto=i(le,"\\propto ","&prop;"),Qe["≈"]=Qe.asymp=Qe.approx=i(le,"\\approx ","&asymp;"),Qe.lt=i(le,"<","&lt;"),Qe.gt=i(le,">","&gt;"),Qe["≤"]=Qe.le=Qe.leq=i(le,"\\le ","&le;"),Qe["≥"]=Qe.ge=Qe.geq=i(le,"\\ge ","&ge;"),Qe.isin=Qe["in"]=i(le,"\\in ","&isin;"),Qe.ni=Qe.contains=i(le,"\\ni ","&ni;"),Qe.notni=Qe.niton=Qe.notcontains=Qe.doesnotcontain=i(le,"\\not\\ni ","&#8716;"),Qe.sub=Qe.subset=i(le,"\\subset ","&sub;"),Qe.sup=Qe.supset=Qe.superset=i(le,"\\supset ","&sup;"),Qe.nsub=Qe.notsub=Qe.nsubset=Qe.notsubset=i(le,"\\not\\subset ","&#8836;"),Qe.nsup=Qe.notsup=Qe.nsupset=Qe.notsupset=Qe.nsuperset=Qe.notsuperset=i(le,"\\not\\supset ","&#8837;"),Qe.sube=Qe.subeq=Qe.subsete=Qe.subseteq=i(le,"\\subseteq ","&sube;"),Qe.supe=Qe.supeq=Qe.supsete=Qe.supseteq=Qe.supersete=Qe.superseteq=i(le,"\\supseteq ","&supe;"),Qe.nsube=Qe.nsubeq=Qe.notsube=Qe.notsubeq=Qe.nsubsete=Qe.nsubseteq=Qe.notsubsete=Qe.notsubseteq=i(le,"\\not\\subseteq ","&#8840;"),Qe.nsupe=Qe.nsupeq=Qe.notsupe=Qe.notsupeq=Qe.nsupsete=Qe.nsupseteq=Qe.notsupsete=Qe.notsupseteq=Qe.nsupersete=Qe.nsuperseteq=Qe.notsupersete=Qe.notsuperseteq=i(le,"\\not\\supseteq ","&#8841;"),he=ve(y,function(t,e){t.init=function(t,n){e.init.call(this,t,"<big>"+n+"</big>")}}),Qe["∑"]=Qe.sum=Qe.summation=i(he,"\\sum ","&sum;"),Qe["∏"]=Qe.prod=Qe.product=i(he,"\\prod ","&prod;"),Qe.coprod=Qe.coproduct=i(he,"\\coprod ","&#8720;"),Qe["∫"]=Qe["int"]=Qe.integral=i(he,"\\int ","&int;"),Qe.N=Qe.naturals=Qe.Naturals=i(ae,"\\mathbb{N}","&#8469;"),Qe.P=Qe.primes=Qe.Primes=Qe.projective=Qe.Projective=Qe.probability=Qe.Probability=i(ae,"\\mathbb{P}","&#8473;"),Qe.Z=Qe.integers=Qe.Integers=i(ae,"\\mathbb{Z}","&#8484;"),Qe.Q=Qe.rationals=Qe.Rationals=i(ae,"\\mathbb{Q}","&#8474;"),Qe.R=Qe.reals=Qe.Reals=i(ae,"\\mathbb{R}","&#8477;"),Qe.C=Qe.complex=Qe.Complex=Qe.complexes=Qe.Complexes=Qe.complexplane=Qe.Complexplane=Qe.ComplexPlane=i(ae,"\\mathbb{C}","&#8450;"),Qe.H=Qe.Hamiltonian=Qe.quaternions=Qe.Quaternions=i(ae,"\\mathbb{H}","&#8461;"),Qe.quad=Qe.emsp=i(ae,"\\quad ","    "),Qe.qquad=i(ae,"\\qquad ","        "),Qe.diamond=i(ae,"\\diamond ","&#9671;"),Qe.bigtriangleup=i(ae,"\\bigtriangleup ","&#9651;"),Qe.ominus=i(ae,"\\ominus ","&#8854;"),Qe.uplus=i(ae,"\\uplus ","&#8846;"),Qe.bigtriangledown=i(ae,"\\bigtriangledown ","&#9661;"),Qe.sqcap=i(ae,"\\sqcap ","&#8851;"),Qe.triangleleft=i(ae,"\\triangleleft ","&#8882;"),Qe.sqcup=i(ae,"\\sqcup ","&#8852;"),Qe.triangleright=i(ae,"\\triangleright ","&#8883;"),Qe.odot=i(ae,"\\odot ","&#8857;"),Qe.bigcirc=i(ae,"\\bigcirc ","&#9711;"),Qe.dagger=i(ae,"\\dagger ","&#0134;"),Qe.ddagger=i(ae,"\\ddagger ","&#135;"),Qe.wr=i(ae,"\\wr ","&#8768;"),Qe.amalg=i(ae,"\\amalg ","&#8720;"),Qe.models=i(ae,"\\models ","&#8872;"),Qe.prec=i(ae,"\\prec ","&#8826;"),Qe.succ=i(ae,"\\succ ","&#8827;"),Qe.preceq=i(ae,"\\preceq ","&#8828;"),Qe.succeq=i(ae,"\\succeq ","&#8829;"),Qe.simeq=i(ae,"\\simeq ","&#8771;"),Qe.mid=i(ae,"\\mid ","&#8739;"),Qe.ll=i(ae,"\\ll ","&#8810;"),Qe.gg=i(ae,"\\gg ","&#8811;"),Qe.parallel=i(ae,"\\parallel ","&#8741;"),Qe.bowtie=i(ae,"\\bowtie ","&#8904;"),Qe.sqsubset=i(ae,"\\sqsubset ","&#8847;"),Qe.sqsupset=i(ae,"\\sqsupset ","&#8848;"),Qe.smile=i(ae,"\\smile ","&#8995;"),Qe.sqsubseteq=i(ae,"\\sqsubseteq ","&#8849;"),Qe.sqsupseteq=i(ae,"\\sqsupseteq ","&#8850;"),Qe.doteq=i(ae,"\\doteq ","&#8784;"),Qe.frown=i(ae,"\\frown ","&#8994;"),Qe.vdash=i(ae,"\\vdash ","&#8870;"),Qe.dashv=i(ae,"\\dashv ","&#8867;"),Qe.longleftarrow=i(ae,"\\longleftarrow ","&#8592;"),Qe.longrightarrow=i(ae,"\\longrightarrow ","&#8594;"),Qe.Longleftarrow=i(ae,"\\Longleftarrow ","&#8656;"),Qe.Longrightarrow=i(ae,"\\Longrightarrow ","&#8658;"),Qe.longleftrightarrow=i(ae,"\\longleftrightarrow ","&#8596;"),Qe.updownarrow=i(ae,"\\updownarrow ","&#8597;"),Qe.Longleftrightarrow=i(ae,"\\Longleftrightarrow ","&#8660;"),Qe.Updownarrow=i(ae,"\\Updownarrow ","&#8661;"),Qe.mapsto=i(ae,"\\mapsto ","&#8614;"),Qe.nearrow=i(ae,"\\nearrow ","&#8599;"),Qe.hookleftarrow=i(ae,"\\hookleftarrow ","&#8617;"),Qe.hookrightarrow=i(ae,"\\hookrightarrow ","&#8618;"),Qe.searrow=i(ae,"\\searrow ","&#8600;"),Qe.leftharpoonup=i(ae,"\\leftharpoonup ","&#8636;"),Qe.rightharpoonup=i(ae,"\\rightharpoonup ","&#8640;"),Qe.swarrow=i(ae,"\\swarrow ","&#8601;"),Qe.leftharpoondown=i(ae,"\\leftharpoondown ","&#8637;"),Qe.rightharpoondown=i(ae,"\\rightharpoondown ","&#8641;"),Qe.nwarrow=i(ae,"\\nwarrow ","&#8598;"),Qe.ldots=i(ae,"\\ldots ","&#8230;"),Qe.cdots=i(ae,"\\cdots ","&#8943;"),Qe.vdots=i(ae,"\\vdots ","&#8942;"),Qe.ddots=i(ae,"\\ddots ","&#8944;"),Qe.surd=i(ae,"\\surd ","&#8730;"),Qe.triangle=i(ae,"\\triangle ","&#9653;"),Qe.ell=i(ae,"\\ell ","&#8467;"),Qe.top=i(ae,"\\top ","&#8868;"),Qe.flat=i(ae,"\\flat ","&#9837;"),Qe.natural=i(ae,"\\natural ","&#9838;"),Qe.sharp=i(ae,"\\sharp ","&#9839;"),Qe.wp=i(ae,"\\wp ","&#8472;"),Qe.bot=i(ae,"\\bot ","&#8869;"),Qe.clubsuit=i(ae,"\\clubsuit ","&#9827;"),Qe.diamondsuit=i(ae,"\\diamondsuit ","&#9826;"),Qe.heartsuit=i(ae,"\\heartsuit ","&#9825;"),Qe.spadesuit=i(ae,"\\spadesuit ","&#9824;"),Qe.oint=i(ae,"\\oint ","&#8750;"),Qe.bigcap=i(ae,"\\bigcap ","&#8745;"),Qe.bigcup=i(ae,"\\bigcup ","&#8746;"),Qe.bigsqcup=i(ae,"\\bigsqcup ","&#8852;"),Qe.bigvee=i(ae,"\\bigvee ","&#8744;"),Qe.bigwedge=i(ae,"\\bigwedge ","&#8743;"),Qe.bigodot=i(ae,"\\bigodot ","&#8857;"),Qe.bigotimes=i(ae,"\\bigotimes ","&#8855;"),Qe.bigoplus=i(ae,"\\bigoplus ","&#8853;"),Qe.biguplus=i(ae,"\\biguplus ","&#8846;"),Qe.lfloor=i(ae,"\\lfloor ","&#8970;"),Qe.rfloor=i(ae,"\\rfloor ","&#8971;"),Qe.lceil=i(ae,"\\lceil ","&#8968;"),Qe.rceil=i(ae,"\\rceil ","&#8969;"),Qe.slash=i(ae,"\\slash ","&#47;"),Qe.opencurlybrace=i(ae,"\\opencurlybrace ","&#123;"),Qe.closecurlybrace=i(ae,"\\closecurlybrace ","&#125;"),Qe.caret=i(ae,"\\caret ","^"),Qe.underscore=i(ae,"\\underscore ","_"),Qe.backslash=i(ae,"\\backslash ","\\"),Qe.vert=i(ae,"|"),Qe.perp=Qe.perpendicular=i(ae,"\\perp ","&perp;"),Qe.nabla=Qe.del=i(ae,"\\nabla ","&nabla;"),Qe.hbar=i(ae,"\\hbar ","&#8463;"),Qe.AA=Qe.Angstrom=Qe.angstrom=i(ae,"\\text\\AA ","&#8491;"),Qe.ring=Qe.circ=Qe.circle=i(ae,"\\circ ","&#8728;"),Qe.bull=Qe.bullet=i(ae,"\\bullet ","&bull;"),Qe.setminus=Qe.smallsetminus=i(ae,"\\setminus ","&#8726;"),Qe.not=Qe["¬"]=Qe.neg=i(ae,"\\neg ","&not;"),Qe["…"]=Qe.dots=Qe.ellip=Qe.hellip=Qe.ellipsis=Qe.hellipsis=i(ae,"\\dots ","&hellip;"),Qe.converges=Qe.darr=Qe.dnarr=Qe.dnarrow=Qe.downarrow=i(ae,"\\downarrow ","&darr;"),Qe.dArr=Qe.dnArr=Qe.dnArrow=Qe.Downarrow=i(ae,"\\Downarrow ","&dArr;"),Qe.diverges=Qe.uarr=Qe.uparrow=i(ae,"\\uparrow ","&uarr;"),Qe.uArr=Qe.Uparrow=i(ae,"\\Uparrow ","&uArr;"),Qe.to=i(le,"\\to ","&rarr;"),Qe.rarr=Qe.rightarrow=i(ae,"\\rightarrow ","&rarr;"),Qe.implies=i(le,"\\Rightarrow ","&rArr;"),Qe.rArr=Qe.Rightarrow=i(ae,"\\Rightarrow ","&rArr;"),Qe.gets=i(le,"\\gets ","&larr;"),Qe.larr=Qe.leftarrow=i(ae,"\\leftarrow ","&larr;"),Qe.impliedby=i(le,"\\Leftarrow ","&lArr;"),Qe.lArr=Qe.Leftarrow=i(ae,"\\Leftarrow ","&lArr;"),Qe.harr=Qe.lrarr=Qe.leftrightarrow=i(ae,"\\leftrightarrow ","&harr;"),Qe.iff=i(le,"\\Leftrightarrow ","&hArr;"),Qe.hArr=Qe.lrArr=Qe.Leftrightarrow=i(ae,"\\Leftrightarrow ","&hArr;"),Qe.Re=Qe.Real=Qe.real=i(ae,"\\Re ","&real;"),Qe.Im=Qe.imag=Qe.image=Qe.imagin=Qe.imaginary=Qe.Imaginary=i(ae,"\\Im ","&image;"),Qe.part=Qe.partial=i(ae,"\\partial ","&part;"),Qe.inf=Qe.infin=Qe.infty=Qe.infinity=i(ae,"\\infty ","&infin;"),Qe.alef=Qe.alefsym=Qe.aleph=Qe.alephsym=i(ae,"\\aleph ","&alefsym;"),Qe.xist=Qe.xists=Qe.exist=Qe.exists=i(ae,"\\exists ","&exist;"),Qe.and=Qe.land=Qe.wedge=i(ae,"\\wedge ","&and;"),Qe.or=Qe.lor=Qe.vee=i(ae,"\\vee ","&or;"),Qe.o=Qe.O=Qe.empty=Qe.emptyset=Qe.oslash=Qe.Oslash=Qe.nothing=Qe.varnothing=i(le,"\\varnothing ","&empty;"),Qe.cup=Qe.union=i(le,"\\cup ","&cup;"),Qe.cap=Qe.intersect=Qe.intersection=i(le,"\\cap ","&cap;"),Qe.deg=Qe.degree=i(ae,"^\\circ ","&deg;"),Qe.ang=Qe.angle=i(ae,"\\angle ","&ang;")}();